---
sidebar: auto
---

# CSS

## 实现一个持续的动画效果

```css
.class {
  animation: kfName 5s infinite;
}

@keyframes kfName {
  from { top: 0px; }
  to   { top: 200px; }
}
```

## position 定位

- `static` 是默认值
- `relative` 相对定位，相对于自身原有位置进行偏移，仍处于标准文档流中
- `absolute` 绝对定位，相对于最近的已定位的祖先元素，有已定位(指 position 不是 static 的元素)祖先元素，以最近的祖先元素为参考标准。如果无已定位祖先元素，以 body 元素为偏移参照基准，完全脱离了标准文档流。
- `fixed` 固定定位的元素会相对于视窗来定位，这意味着即便页面滚动，它还是会停留在相同的位置。一个固定定位元素不会保留它原本在页面应有的空隙。

## 重排和重绘

以下三种情况，会导致网页重新渲染。

- 修改 DOM
- 修改样式表
- 用户事件（比如鼠标悬停、页面滚动、输入框键入文字、改变窗口大小等等）

重新渲染，就需要重新生成布局和重新绘制。前者叫做 `重排（reflow）`，后者叫做 `重绘（repaint）`。

需要注意的是，"重绘"不一定需要"重排"，比如改变某个网页元素的颜色，就只会触发"重绘"，不会触发"重排"，因为布局没有改变。但是，"重排"必然导致"重绘"，比如改变一个网页元素的位置，就会同时触发"重排"和"重绘"，因为布局改变了。

尽量不要在修改样式或者布局信息时查询样式，因为查询的时候会强制重排，导致浏览器无法优化多次重排。

## transform 性能

浏览器渲染的过程若下：

![browser_render](./browser_render.png)

transform 是位于 Composite 层，而 width、left、margin 等则是位于 Layout 层，在 Layout 层发生的改变必定导致 Paint -> Composite，所以相对而言使用 transform 实现的动画效果相对更为流畅。

此外，浏览器也会针对 transform 等开启 `GPU 加速`。

## 盒模型

盒模型（Box Model）有以下几部分：

- Margin(外边距) - 清除边框外的区域，外边距是透明的。
- Border(边框) - 围绕在内边距和内容外的边框。
- Padding(内边距) - 清除内容周围的区域，内边距是透明的。
- Content(内容) - 盒子的内容，显示文本和图像。

盒模型注意 `box-sizing` 属性，允许以特定的方式定义匹配某个区域的特定元素。

- content-box 宽度和高度分别应用到元素的内容框。`W3C 盒子模型`
- border-box 为元素指定的任何内边距和边框都将在已设定的宽度和高度内进行绘制。 `IE 盒模型`